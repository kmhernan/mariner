{
  "input": {
    "commons_file_1": {
      "class": "File",
      "location": "COMMONS/1f8a359a-5421-4c4d-9934-62ee0b77545c"
    },
    "commons_file_2": {
      "class": "File",
      "location": "COMMONS/580c5abd-f5a5-4b2a-903f-9d32953b9fc4"
    }
  },
  "workflow": {
    "cwlVersion": "v1.0",
    "$graph": [
      {
        "inputs": [
          {
            "type": "File",
            "id": "#main/commons_file_1"
          },
          {
            "type": "File",
            "id": "#main/commons_file_2"
          }
        ],
        "requirements": [
          {
            "class": "InlineJavascriptRequirement"
          }
        ],
        "outputs": [
          {
            "outputSource": "#main/read_from_engine_workspace_and_commons/output_files",
            "type": {
              "items": "File",
              "type": "array"
            },
            "id": "#main/output_files"
          }
        ],
        "class": "Workflow",
        "steps": [
          {
            "out": [
              "#main/read_from_commons/processed_file_1",
              "#main/read_from_commons/processed_file_2"
            ],
            "run": "#read_from_commons.cwl",
            "id": "#main/read_from_commons",
            "in": [
              {
                "source": "#main/commons_file_1",
                "id": "#main/read_from_commons/commons_file_1"
              },
              {
                "source": "#main/commons_file_2",
                "id": "#main/read_from_commons/commons_file_2"
              }
            ]
          },
          {
            "out": [
              "#main/read_from_engine_workspace_and_commons/output_files"
            ],
            "run": "#read_from_engine_workspace_and_commons.cwl",
            "id": "#main/read_from_engine_workspace_and_commons",
            "in": [
              {
                "source": "#main/read_from_commons/processed_file_1",
                "id": "#main/read_from_engine_workspace_and_commons/processed_file_1"
              },
              {
                "source": "#main/read_from_commons/processed_file_2",
                "id": "#main/read_from_engine_workspace_and_commons/processed_file_2"
              },
              {
                "source": "#main/commons_file_1",
                "id": "#main/read_from_engine_workspace_and_commons/unprocessed_file_1"
              },
              {
                "source": "#main/commons_file_2",
                "id": "#main/read_from_engine_workspace_and_commons/unprocessed_file_2"
              }
            ]
          }
        ],
        "id": "#main"
      },
      {
        "inputs": {
          "commons_file_1": {
            "type": "File"
          },
          "commons_file_2": {
            "type": "File"
          }
        },
        "requirements": [
          {
            "class": "InlineJavascriptRequirement"
          },
          {
            "class": "ShellCommandRequirement"
          }
        ],
        "outputs": {
          "processed_file_1": {
            "outputBinding": {
              "glob": "processed_file_1"
            },
            "type": "File"
          },
          "processed_file_2": {
            "outputBinding": {
              "glob": "processed_file_2"
            },
            "type": "File"
          }
        },
        "baseCommand": [],
        "id": "#read_from_commons.cwl",
        "arguments": [
          {
            "position": 0,
            "valueFrom": "cat $(inputs.commons_file_1.location) > processed_file_1.txt \\ echo 'NOTE this commons_file_1 was processed in step 1' >> processed_file_1.txt \\ cat $(inputs.commons_file_2.location) > processed_file_2.txt \\ echo 'NOTE this commons_file_2 was processed in step 1' >> processed_file_2.txt"
          }
        ],
        "class": "CommandLineTool"
      },
      {
        "inputs": {
          "processed_file_1": "File",
          "processed_file_2": "File",
          "unprocessed_file_1": "File",
          "unprocessed_file_2": "File"
        },
        "requirements": [
          {
            "class": "InlineJavascriptRequirement"
          },
          {
            "class": "ShellCommandRequirement"
          }
        ],
        "outputs": {
          "output_files": {
            "outputBinding": {
              "glob": [
                "final_processed",
                "unprocessed"
              ],
              "loadContents": true
            },
            "type": "File[]"
          }
        },
        "baseCommand": [],
        "id": "#read_from_engine_workspace_and_commons.cwl",
        "arguments": [
          {
            "position": 0,
            "valueFrom": "cat $(inputs.unprocessed_file_1.location) > unprocessed_file_1.txt \\ cat $(inputs.unprocessed_file_2.location) > unprocessed_file_2.txt \\ cat $(inputs.processed_file_1.location) > final_processed_file_1.txt \\ echo 'NOTE this commons_file_1 was processed in step 2' >> final_processed_file_1.txt \\ cat $(inputs.processed_file_2.location) > final_processed_file_2.txt \\ echo 'NOTE this commons_file_2 was processed in step 2' >> final_processed_file_2.txt"
          }
        ],
        "class": "CommandLineTool"
      }
    ]
  },
  "id": "user-test",
  "manifest": [
    {
      "object_id": "1f8a359a-5421-4c4d-9934-62ee0b77545c"
    },
    {
      "object_id": "580c5abd-f5a5-4b2a-903f-9d32953b9fc4"
    }
  ]
}
