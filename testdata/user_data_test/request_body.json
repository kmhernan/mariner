{
  "input": {
    "commons_file_1": {
      "class": "File",
      "location": "COMMONS/8bc9f306-5b5d-4b6b-b34e-f90680824b17"
    },
    "commons_file_2": {
      "class": "File",
      "location": "COMMONS/bd7edb54-2029-4ac5-874a-da8daeb250db"
    },
    "user_file": {
      "class": "File",
      "location": "USER/user-data.txt"
    }
  },
  "manifest": [
    {
      "object_id": "8bc9f306-5b5d-4b6b-b34e-f90680824b17"
    },
    {
      "object_id": "bd7edb54-2029-4ac5-874a-da8daeb250db"
    }
  ],
  "workflow": {
    "$graph": [
      {
        "class": "CommandLineTool",
        "requirements": [
          {
            "class": "InlineJavascriptRequirement"
          },
          {
            "class": "ShellCommandRequirement"
          },
          {
            "class": "InitialWorkDirRequirement",
            "listing": [
              {
                "entryname": "touchFiles.sh",
                "entry": "#!/bin/sh\ncat $(inputs.unprocessed_file_1.location) > unprocessed_file_1.txt\ncat $(inputs.unprocessed_file_2.location) > unprocessed_file_2.txt\ncat $(inputs.unprocessed_file_3.location) > unprocessed_file_3.txt\necho 'NOTE this commons_file_1 was processed in step 2' | cat $(inputs.processed_file_1.location) - > final_processed_file_1.txt\necho 'NOTE this commons_file_2 was processed in step 2' | cat $(inputs.processed_file_2.location) - > final_processed_file_2.txt\necho 'NOTE this user_file was processed in step 2' | cat $(inputs.processed_file_3.location) - > final_processed_file_3.txt\n"
              }
            ]
          }
        ],
        "inputs": [
          {
            "type": "File",
            "id": "#read_from_all.cwl/processed_file_1"
          },
          {
            "type": "File",
            "id": "#read_from_all.cwl/processed_file_2"
          },
          {
            "type": "File",
            "id": "#read_from_all.cwl/processed_file_3"
          },
          {
            "type": "File",
            "id": "#read_from_all.cwl/unprocessed_file_1"
          },
          {
            "type": "File",
            "id": "#read_from_all.cwl/unprocessed_file_2"
          },
          {
            "type": "File",
            "id": "#read_from_all.cwl/unprocessed_file_3"
          }
        ],
        "outputs": [
          {
            "id": "#read_from_all.cwl/output_files",
            "type": "File[]",
            "outputBinding": {
              "loadContents": true,
              "glob": [
                "final_processed*",
                "unprocessed*"
              ]
            }
          }
        ],
        "baseCommand": [
          "/bin/sh"
        ],
        "arguments": [
          {
            "position": 1,
            "valueFrom": "touchFiles.sh"
          }
        ],
        "id": "#read_from_all.cwl"
      },
      {
        "class": "CommandLineTool",
        "requirements": [
          {
            "class": "InlineJavascriptRequirement"
          },
          {
            "class": "ShellCommandRequirement"
          },
          {
            "class": "InitialWorkDirRequirement",
            "listing": [
              {
                "entryname": "touchFiles.sh",
                "entry": "#!/bin/sh\necho 'NOTE this commons_file_1 was processed in step 1' | cat $(inputs.commons_file_1.location) - > processed_file_1.txt\necho 'NOTE this commons_file_2 was processed in step 1' | cat $(inputs.commons_file_2.location) - > processed_file_2.txt\necho 'NOTE this user_file was processed in step 1' | cat $(inputs.user_file.location) - > processed_file_3.txt\n"
              }
            ]
          }
        ],
        "inputs": [
          {
            "type": "File",
            "id": "#read_from_commons_and_user.cwl/commons_file_1"
          },
          {
            "type": "File",
            "id": "#read_from_commons_and_user.cwl/commons_file_2"
          },
          {
            "type": "File",
            "id": "#read_from_commons_and_user.cwl/user_file"
          }
        ],
        "outputs": [
          {
            "id": "#read_from_commons_and_user.cwl/processed_file_1",
            "type": "File",
            "outputBinding": {
              "glob": "processed_file_1*"
            }
          },
          {
            "id": "#read_from_commons_and_user.cwl/processed_file_2",
            "type": "File",
            "outputBinding": {
              "glob": "processed_file_2*"
            }
          },
          {
            "id": "#read_from_commons_and_user.cwl/processed_file_3",
            "type": "File",
            "outputBinding": {
              "glob": "processed_file_3*"
            }
          }
        ],
        "baseCommand": [
          "/bin/sh"
        ],
        "arguments": [
          {
            "position": 1,
            "valueFrom": "touchFiles.sh"
          }
        ],
        "id": "#read_from_commons_and_user.cwl"
      },
      {
        "class": "Workflow",
        "requirements": [
          {
            "class": "InlineJavascriptRequirement"
          }
        ],
        "inputs": [
          {
            "type": "File",
            "id": "#main/commons_file_1"
          },
          {
            "type": "File",
            "id": "#main/commons_file_2"
          },
          {
            "type": "File",
            "id": "#main/user_file"
          }
        ],
        "outputs": [
          {
            "type": {
              "type": "array",
              "items": "File"
            },
            "outputSource": "#main/read_from_all/output_files",
            "id": "#main/output_files"
          }
        ],
        "steps": [
          {
            "run": "#read_from_all.cwl",
            "in": [
              {
                "source": "#main/read_from_commons_and_user/processed_file_1",
                "id": "#main/read_from_all/processed_file_1"
              },
              {
                "source": "#main/read_from_commons_and_user/processed_file_2",
                "id": "#main/read_from_all/processed_file_2"
              },
              {
                "source": "#main/read_from_commons_and_user/processed_file_3",
                "id": "#main/read_from_all/processed_file_3"
              },
              {
                "source": "#main/commons_file_1",
                "id": "#main/read_from_all/unprocessed_file_1"
              },
              {
                "source": "#main/commons_file_2",
                "id": "#main/read_from_all/unprocessed_file_2"
              },
              {
                "source": "#main/user_file",
                "id": "#main/read_from_all/unprocessed_file_3"
              }
            ],
            "out": [
              "#main/read_from_all/output_files"
            ],
            "id": "#main/read_from_all"
          },
          {
            "run": "#read_from_commons_and_user.cwl",
            "in": [
              {
                "source": "#main/commons_file_1",
                "id": "#main/read_from_commons_and_user/commons_file_1"
              },
              {
                "source": "#main/commons_file_2",
                "id": "#main/read_from_commons_and_user/commons_file_2"
              },
              {
                "source": "#main/user_file",
                "id": "#main/read_from_commons_and_user/user_file"
              }
            ],
            "out": [
              "#main/read_from_commons_and_user/processed_file_1",
              "#main/read_from_commons_and_user/processed_file_2",
              "#main/read_from_commons_and_user/processed_file_3"
            ],
            "id": "#main/read_from_commons_and_user"
          }
        ],
        "id": "#main"
      }
    ],
    "cwlVersion": "v1.0"
  }
}