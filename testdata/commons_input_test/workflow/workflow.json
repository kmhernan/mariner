{
    "$graph": [
        {
            "class": "Workflow",
            "requirements": [
                {
                    "class": "InlineJavascriptRequirement"
                }
            ],
            "inputs": [
                {
                    "type": "File",
                    "id": "#main/commons_file_1"
                },
                {
                    "type": "File",
                    "id": "#main/commons_file_2"
                }
            ],
            "outputs": [
                {
                    "type": {
                        "type": "array",
                        "items": "File"
                    },
                    "outputSource": "#main/read_from_engine_workspace_and_commons/output_files",
                    "id": "#main/output_files"
                }
            ],
            "steps": [
                {
                    "run": "#read_from_commons.cwl",
                    "in": [
                        {
                            "source": "#main/commons_file_1",
                            "id": "#main/read_from_commons/commons_file_1"
                        },
                        {
                            "source": "#main/commons_file_2",
                            "id": "#main/read_from_commons/commons_file_2"
                        }
                    ],
                    "out": [
                        "#main/read_from_commons/processed_file_1",
                        "#main/read_from_commons/processed_file_2"
                    ],
                    "id": "#main/read_from_commons"
                },
                {
                    "run": "#read_from_engine_workspace_and_commons.cwl",
                    "in": [
                        {
                            "source": "#main/read_from_commons/processed_file_1",
                            "id": "#main/read_from_engine_workspace_and_commons/processed_file_1"
                        },
                        {
                            "source": "#main/read_from_commons/processed_file_2",
                            "id": "#main/read_from_engine_workspace_and_commons/processed_file_2"
                        },
                        {
                            "source": "#main/commons_file_1",
                            "id": "#main/read_from_engine_workspace_and_commons/unprocessed_file_1"
                        },
                        {
                            "source": "#main/commons_file_2",
                            "id": "#main/read_from_engine_workspace_and_commons/unprocessed_file_2"
                        }
                    ],
                    "out": [
                        "#main/read_from_engine_workspace_and_commons/output_files"
                    ],
                    "id": "#main/read_from_engine_workspace_and_commons"
                }
            ],
            "id": "#main"
        },
        {
            "class": "CommandLineTool",
            "requirements": [
                {
                    "class": "InlineJavascriptRequirement"
                },
                {
                    "class": "ShellCommandRequirement"
                }
            ],
            "inputs": {
                "commons_file_1": {
                    "type": "File"
                },
                "commons_file_2": {
                    "type": "File"
                }
            },
            "outputs": {
                "processed_file_1": {
                    "type": "File",
                    "outputBinding": {
                        "glob": "processed_file_1"
                    }
                },
                "processed_file_2": {
                    "type": "File",
                    "outputBinding": {
                        "glob": "processed_file_2"
                    }
                }
            },
            "baseCommand": [],
            "arguments": [
                {
                    "position": 0,
                    "valueFrom": "cat $(inputs.commons_file_1.location) > processed_file_1.txt \\ echo 'NOTE this commons_file_1 was processed in step 1' >> processed_file_1.txt \\ cat $(inputs.commons_file_2.location) > processed_file_2.txt \\ echo 'NOTE this commons_file_2 was processed in step 1' >> processed_file_2.txt"
                }
            ],
            "id": "#read_from_commons.cwl"
        },
        {
            "class": "CommandLineTool",
            "requirements": [
                {
                    "class": "InlineJavascriptRequirement"
                },
                {
                    "class": "ShellCommandRequirement"
                }
            ],
            "inputs": {
                "processed_file_1": "File",
                "processed_file_2": "File",
                "unprocessed_file_1": "File",
                "unprocessed_file_2": "File"
            },
            "outputs": {
                "output_files": {
                    "type": "File[]",
                    "outputBinding": {
                        "loadContents": true,
                        "glob": [
                            "final_processed",
                            "unprocessed"
                        ]
                    }
                }
            },
            "baseCommand": [],
            "arguments": [
                {
                    "position": 0,
                    "valueFrom": "cat $(inputs.unprocessed_file_1.location) > unprocessed_file_1.txt \\ cat $(inputs.unprocessed_file_2.location) > unprocessed_file_2.txt \\ cat $(inputs.processed_file_1.location) > final_processed_file_1.txt \\ echo 'NOTE this commons_file_1 was processed in step 2' >> final_processed_file_1.txt \\ cat $(inputs.processed_file_2.location) > final_processed_file_2.txt \\ echo 'NOTE this commons_file_2 was processed in step 2' >> final_processed_file_2.txt"
                }
            ],
            "id": "#read_from_engine_workspace_and_commons.cwl"
        }
    ],
    "cwlVersion": "v1.0"
}